
<p align="center">
    <h1>Proyecto de Estructuras Abstractas de Datos y Algoritmos para Ingenier√≠a - IE0217</h1>
    <h3>Investigaci√≥n, dise√±o e implementaci√≥n de un sistema de gesti√≥n bancaria.</h3>
    <p>Profesor: Esteban Badilla Alvarado</p>
    <p>Estudiantes: <br>Sergio Castillo V√≠quez, C31824 <br>
    Rodrigo S√°nchez Araya, C37259<br>
    Jonathan Monge Cascante, B94955
    </p>
</p>

## Tabla de contenidos
- [Contextualizaci√≥n del proyecto](#contextualizaci√≥n-del-proyecto)
- [Instrucciones para la ejecuci√≥n](#instrucciones-para-la-ejecuci√≥n)
- [Primera Fase del Proyecto - Parte Te√≥rica](#primera-fase-del-proyecto)
- [Definici√≥n de t√©rminos e ideas](#definici√≥n-de-t√©rminos-e-ideas)
- [Primera Fase del Proyecto - Parte de Dise√±o](#primera-fase-del-proyecto-parte-de-dise√±o)
- [Pruebas de Ejecuci√≥n del programa](#purebas-de-ejecuci√≥n-del-programa)
- [Cronograma de actividades](#cronograma-de-actividades)
- [Referencias](#referencias)



## Contextualizaci√≥n del proyecto

El objetivo principal fue dise√±ar, programar e implementar un **sistema de gesti√≥n bancaria** orientado a la operaci√≥n de agentes de atenci√≥n al cliente en ventanillas. La soluci√≥n desarrollada permite simular funcionalidades clave de una entidad financiera, como:

- Consulta y manejo de cuentas en colones y d√≥lares.
- Gesti√≥n de pr√©stamos (personales, prendarios e hipotecarios).
- Operaciones como dep√≥sitos, retiros, transferencias y abonos a pr√©stamos.
- Generaci√≥n de tablas de amortizaci√≥n y reportes tabulares en formato de texto.
- Identificaci√≥n √∫nica de clientes y registro hist√≥rico de transacciones.

El proyecto se desarroll√≥ en **C++** con enfoque en buenas pr√°cticas de **programaci√≥n orientada a objetos**, y utilizando **SQLite** para el almacenamiento de datos. Adem√°s, se document√≥ utilizando **Doxygen**, y su organizaci√≥n y control de versiones se gestion√≥ a trav√©s de **GitHub**.

Tambi√©n se dise√±√≥ un sitio web con la documentaci√≥n t√©cnica del proyecto, disponible en:  
üîó [https://proyecto-ie0217-rsj.netlify.app](https://proyecto-ie0217-rsj.netlify.app)


## Instrucciones para la ejecuci√≥n 

El c√≥digo funciona mediante el uso de Makefile mediante los siguientes comandos:

**Aeg√∫rese de estar dentro del repositorio dedicado al proyecto**

```bash
# Debe ubicarse en el mismo nivel en donde se encuentra el Makefile
cd ./ie0217-proyecto
```
**Puede ejecutar, dependiendo de su sistema opetarivo:**

**Windows**

```
mingw32-make run
```

**Mac - Linux**
```
make run
```


**El Makefile cuenta con la capacidad de distingir el os con el que se trabaja**


```makefile
ifeq ($(OS), Windows_NT)
    OSFLAG = WINDOWS
    INCLUDE = -IC:\sqlite -IC:\Program-Files\OpenSSL-Win64\include
    LIBDIRS = -LC:\sqlite -LC:\Program-Files\OpenSSL-Win64
    LIBS = -lsqlite3 -lssl -lcrypto
else
    UNAME_S := $(shell uname -s)
    ifeq ($(UNAME_S), Darwin)  # macOS
        OSFLAG = MAC
        INCLUDE = -I/opt/homebrew/opt/sqlite/include -I/opt/homebrew/opt/openssl@3/include
        LIBDIRS = -L/opt/homebrew/opt/sqlite/lib -L/opt/homebrew/opt/openssl@3/lib
        LIBS = -lsqlite3 -lssl -lcrypto
    else
        OSFLAG = LINUX
        INCLUDE = -I/usr/include
        LIBDIRS = -L/usr/lib
        LIBS = -lsqlite3 -lssl -lcrypto
    endif
endif
```

## Primera Fase del Proyecto 

## Parte Te√≥rica

## Definici√≥n de t√©rminos e ideas
Para tener una idea clara de lo que se quiere realizar es necesario definir los t√©rminos utilizados dentro de este proyecto, por lo tanto, se debe investigar y definir cada uno de ellos y determinar qu√© conllevan y c√≥mo se implementan. Esto con el fin de que, a la hora de implementarlos dentro del c√≥digo, ya sea como una funci√≥n o de alguna otra forma, estos sean realistas y se apeguen a un funcionamiento real.

### Atenci√≥n a clientes
Bas√°ndose en un banco, podemos observar las opciones de atenci√≥n a clientes que este brinda. Por ejemplo, el Scotiabank proporciona un n√∫mero telef√≥nico al que se puede llamar, tambi√©n permite un chat en l√≠nea, por lo tanto, se puede implementar que esta opci√≥n brinde la informaci√≥n de contacto necesaria. 

### Pr√©stamos Personales
Est√°n enfocados en cubrir necesidades a corto plazo y en general enfocados en gastos propios o familiares, por lo general y bas√°ndose en el banco Scotiabank las tasas de inter√©s van de 23% a 24% en colones y son de tasa fija. Adem√°s, estos pr√©stamos en este banco son realizables √∫nicamente en la opci√≥n de colones, estos datos tambi√©n son muy distintos dependiendo del banco en el que se busque, sin embargo, por indicaci√≥n el monto del pr√©stamo ser√° ingresado por el usuario, quien tambi√©n podr√° personalizar los valores de monto, n√∫mero de cuotas y la tasa de inter√©s.

### Pr√©stamos Prendarios
Estos pr√©stamos son principalmente financiamientos para compra de bienes de capital, veh√≠culos principalmente, por lo que se toma como un sistema de financiamiento que permite obtener la aprobaci√≥n del cr√©dito para veh√≠culo, nuevamente tomando como base el banco Scotiabank este, por ejemplo, da primas desde el 10%, plazos de hasta 96 meses y la opci√≥n de colones y d√≥lares, pero nuevamente el monto del pr√©stamo ser√° ingresado por el usuario, tambi√©n podr√° personalizar los valores de monto, n√∫mero de cuotas y tasa de inter√©s.

### Pr√©stamos Hipotecarios
Los pr√©stamos hipotecarios son pr√©stamos a mediano o largo plazo y, por lo general, se otorgan para la compra, ampliaci√≥n, reparaci√≥n o construcci√≥n de una vivienda, compra de sitios, oficinas o locales comerciales y son generalmente cr√©ditos que permiten a las personas adquirir una vivienda. Estos, bas√°ndonos en el banco ya dicho ofrece este cr√©dito en la opci√≥n de d√≥lares o colones con tasas de 10 a 10,50% en colones y de 6,95 a 8,50% en d√≥lares. Nuevamente y al igual que los anteriores pr√©stamos dichos, el monto del pr√©stamo ser√° ingresado por el usuario; tambi√©n podr√° personalizar los valores de monto, n√∫mero de cuotas y tasa de inter√©s.

### Abonos a pr√©stamos propios o de terceros
Los abonos son pagos en una cantidad adicional al pago m√≠nimo requerido por el pr√©stamo con la cual se tiene una obligaci√≥n, y esa cantidad extra se destina directamente a reducir el monto principal del pr√©stamo. Por lo que esta se ve como una reducci√≥n directa al monto total del pr√©stamo que puede ser tanto a el personal como al de un tercero.

### Tasa de inter√©s, plazo en meses y cuota mensual en los pr√©stamos
El inter√©s es un precio que el cliente paga a la entidad por disponer del capital prestado. El Plazo es un periodo de tiempo estipulado en el contrato para devolver el principal m√°s el inter√©s. Las cuotas son la cantidad que se deben pagar cada mes e incluyen el inter√©s y la parte proporcional de la cantidad utilizada del total del pr√©stamo.

### Tipos de inter√©s
**Inter√©s fijo :** 
El inter√©s fijo refiere al tipo de inter√©s que se mantiene constante a lo largo del tiempo del pr√©stamo, es decir, se mantiene invariable respecto a la tasa de inter√©s del mercado.

**Inter√©s variable :** 
Al contrario del inter√©s fijo, este es actualizado respecto a la tasa de inter√©s del mercado bajo plazos establecidos por la entidad financiera. Adem√°s, la entidad define previamente un rango dentro del cual var√≠a el tipo de inter√©s.

**Inter√©s mixto :**
C√≥mo lo indica su nombre, este tipo de inter√©s mezcla los dos tipos de inter√©s anteriores, de modo que durante los primeros a√±os del pr√©stamo el tipo de inter√©s es fijo; sin embargo, durante los a√±os restantes del pr√©stamo, el inter√©s es de tipo variable.

### Abonos al capital en pr√©stamos
Es abonar al total del prestamo y no a los intereses, entonces, como cada mes la cuota llega por un monto de capital y un monto de intereses, en algunos cr√©ditos se puede abonar a capital, de modo que se reduzca la deuda y solo quede debiendo los intereses.

### Intereses abonados en pr√©stamos
Los abonos a inter√©s son pagos adicionales que se realizan sobre la deuda, m√°s all√° del pago m√≠nimo mensual requerido.

### F√≥rmulas para el c√°lculo de los intereses y cuotas mensuales de los prestamos
Para la obtenci√≥n de estas formulas nos basamos en los c√°lculos que se utilizan en Simulador de Pr√©stamos Personales y Empresas - Calculadora Billin, 2018 y la pagina oficial del banco BAC Credomatic la cual incluye m√∫ltiples documentos con informaci√≥n detallada al respecto. Estas formulas utilizan principalmente los datos de los intereses, el capital o monto total del pr√©stamo pedido y el plazo en meses del pr√©stamo.

### F√≥rmula para el c√°lculo de los intereses de los prestamos
$\text{Cuota de Inter√©s Mensual} = \frac{\text{Cuota Restante} \times \text{Inter√©s Mensual}}{12}$

### F√≥rmula para el c√°lculo de las cuotas mensuales para los prestamos personales y prendarios
$\text{Cuota Mensual} = \frac{\text{Capital} \times \text{Inter√©s Mensual}}{1 - (1 + \text{Inter√©s Mensual})^{-12}}$

### F√≥rmula para el c√°lculo de las cuotas mensuales para los prestamos hipotecarios
$\text{Cuota Mensual} = \frac{P \cdot i}{1 - (1 + i)^{-n}}$


### Certificados de dep√≥sito a plazo (CDP)
Es un dep√≥sito que se pacta a un periodo de tiempo, el cual es acordado entre el cliente y el banco. La tasa de inter√©s se establece en base al monto del dep√≥sito y el plazo. Es una alternativa de inversi√≥n que hace crecer moderadamente el dinero de la cuenta. B√°sicamente es una herramienta de ahorros de bajo riesgo que puede aumentar el monto que gana por inter√©s, y al mismo tiempo mantener su dinero invertido de una manera relativamente segura.

### Dep√≥sitos
Son un producto de ahorro a trav√©s del cual los clientes depositan una cantidad de dinero en la entidad financiera durante un periodo de tiempo determinado. Puede verse como un aumento en el saldo disponible de la cuenta bancaria. 

### Retiro 
Un retiro bancario consiste en extraer dinero de un banco, por ende, se refiere a una reducci√≥n de dinero de la cuenta bancaria de un usuario registrado, siempre y cuando este tenga fondos disponibles. 

### Transferencia 
Es una operaci√≥n por la que una persona desde una cuenta suya env√≠e una determinada cantidad de dinero a la cuenta de otra persona que puede ser de su mismo banco o de otro. Este puede verse como un movimiento en la cuenta del usuario.

## Primera Fase del Proyecto: Parte de Dise√±o 
Concluida la secci√≥n te√≥rica, se detalla el dise√±o que el programa de gesti√≥n bancaria necesita para su correcto funcionamiento seg√∫n las intrucciones asignadas.

### Diagrama de Flujo 

![Diagrama de Flujo Proyecto](imagenes/DIagramaProyecto.png)


# Esquema de la Base de Datos

## Tabla: `Cuenta_Colones`
| Columna          | Tipo       | Restricciones                                                   |
|------------------|------------|-----------------------------------------------------------------|
| `id`             | INTEGER    | PRIMARY KEY, CHECK(id BETWEEN 0 AND 999999999), NOT NULL       |
| `nombre`         | TEXT       | NOT NULL                                                      |
| `salida_pais`    | BOOLEAN    | NOT NULL, CHECK(salida_pais IN (0, 1))                         |
| `cantidad_dinero`| INTEGER    | NOT NULL, CHECK(cantidad_dinero >= 0), DEFAULT 0               |
| `cvv`            | INTEGER    | NOT NULL, CHECK(cvv BETWEEN 100 AND 999)                      |
| `password`       | TEXT       | NOT NULL                                                      |

---

## Tabla: `Cuenta_Dolares`
| Columna          | Tipo       | Restricciones                                                   |
|------------------|------------|-----------------------------------------------------------------|
| `id`             | INTEGER    | PRIMARY KEY, CHECK(id BETWEEN 0 AND 999999999), NOT NULL       |
| `nombre`         | TEXT       | NOT NULL                                                      |
| `salida_pais`    | BOOLEAN    | NOT NULL, CHECK(salida_pais IN (0, 1))                         |
| `cantidad_dinero`| INTEGER    | NOT NULL, CHECK(cantidad_dinero >= 0), DEFAULT 0               |
| `cvv`            | INTEGER    | NOT NULL, CHECK(cvv BETWEEN 100 AND 999)                      |
| `password`       | TEXT       | NOT NULL                                                      |

---

## Tabla: `Movimientos_Colones`
| Columna          | Tipo       | Restricciones                                                   |
|------------------|------------|-----------------------------------------------------------------|
| `id_cuenta`      | INTEGER    | NOT NULL, FOREIGN KEY REFERENCES `Cuenta_Colones(id)` ON DELETE CASCADE |
| `detalle`        | TEXT       | NOT NULL                                                      |
| `fecha`          | TEXT       | DEFAULT CURRENT_TIMESTAMP, NOT NULL                           |

---

## Tabla: `Movimientos_dolares`
| Columna          | Tipo       | Restricciones                                                   |
|------------------|------------|-----------------------------------------------------------------|
| `id_cuenta`      | INTEGER    | NOT NULL, FOREIGN KEY REFERENCES `Cuenta_Dolares(id)` ON DELETE CASCADE |
| `detalle`        | TEXT       | NOT NULL                                                      |
| `fecha`          | TEXT       | DEFAULT CURRENT_TIMESTAMP, NOT NULL                           |

---

## Tabla: `Prestamos_Colones`
| Columna            | Tipo       | Restricciones                                                   |
|--------------------|------------|-----------------------------------------------------------------|
| `id_prestamo`      | INTEGER    | PRIMARY KEY, CHECK(id_prestamo BETWEEN 0 AND 999999999), NOT NULL |
| `id_cuenta`        | INTEGER    | NOT NULL, FOREIGN KEY REFERENCES `Cuenta_Colones(id)` ON DELETE CASCADE |
| `intereses`        | REAL       | NOT NULL                                                      |
| `meses`            | INTEGER    | NOT NULL                                                      |
| `monto`            | REAL       | NOT NULL                                                      |
| `intereses_abonados`| REAL      | NOT NULL                                                      |
| `saldo_restante`   | REAL       | NOT NULL, CHECK(saldo_restante >= 0)                          |
| `tipo_prestamo`    | TEXT       | NOT NULL                                                      |
| `monto_por_cuota`  | FLOAT      | NOT NULL, CHECK(monto_por_cuota >= 0)                         |
| `cuotas_pagadas`   | INTEGER    | NOT NULL, CHECK(cuotas_pagadas >= 0)                          |

---

## Tabla: `Prestamos_Dolares`
| Columna            | Tipo       | Restricciones                                                   |
|--------------------|------------|-----------------------------------------------------------------|
| `id_prestamo`      | INTEGER    | PRIMARY KEY, CHECK(id_prestamo BETWEEN 0 AND 999999999), NOT NULL |
| `id_cuenta`        | INTEGER    | NOT NULL, FOREIGN KEY REFERENCES `Cuenta_Dolares(id)` ON DELETE CASCADE |
| `intereses`        | REAL       | NOT NULL                                                      |
| `meses`            | INTEGER    | NOT NULL                                                      |
| `monto`            | REAL       | NOT NULL                                                      |
| `intereses_abonados`| REAL      | NOT NULL                                                      |
| `saldo_restante`   | REAL       | NOT NULL, CHECK(saldo_restante >= 0)                          |
| `tipo_prestamo`    | TEXT       | NOT NULL                                                      |
| `monto_por_cuota`  | REAL       | NOT NULL, CHECK(monto_por_cuota >= 0)                         |
| `cuotas_pagadas`   | INTEGER    | NOT NULL, CHECK(cuotas_pagadas >= 0)                          |

## Cronograma de actividades
![Cronograma de Actividades](imagenes/Cronograma.jpg)



## Purebas de ejecuci√≥n del programa 

- Ejecucion principal del programa: 

![alt text](imagenes/Ejecucion1.png)

- Manejo de errores en el Main:

![alt text](imagenes/ManejoErroresMainM.png)


- Creacion de cuenta en colones: 

![alt text](imagenes/CreacioncuentaColones.png)


- Creacion de cuenta en colones y dolares: 


![alt text](imagenes/CrearCuentaDyC.png)

- ID inv√°lido: 

![alt text](imagenes/IDinvalido.png)

- Manejo Errores en el men√∫ secundario: 

![alt text](imagenes/ManejoErrorMenuSecundario.png)

- Deposito y Estado de cuenta: 

![alt text](imagenes/depositoyestadcuenta.png)


- Retiro con error y sin error: 

![alt text](imagenes/Retiroerrorybueno.png)

- Salida del pa√≠s: 

![alt text](imagenes/SalidaPaisPin.png)

- Error Prestamos: 


![alt text](imagenes/Errorprestamos.png)

- Prueba Pr√©stamo: 

![alt text](imagenes/pruebaprestamo.png)

- Prueba Transferencia: 

![alt text](imagenes/PruebaTransferencia.png)

- Abono: 

![alt text](imagenes/Abono.png)


- Pago de cuota: 

![alt text](imagenes/PagoCuota.png)


## Bit√°cora:

| Fecha | Persona | Aporte |
|-----------|-----------|-----------|
| 01/11/24  | Rodrigo S√°nchez Araya   |Creaci√≥n del main. Se agrega funci√≥n para establecer tipo de cambio CRC/USD   |
| 03/11/24  | Sergio Castillo V√≠quez    | Creaci√≥n de base de datos con las cuatro tablas correspondiente a la cuenta en colones, cuenta en d√≥lares, movimientos y pr√©stamos   |
| 05/11/24  | Rodrigo S√°nchez Araya    | Firmado de funciones para Atencion Cliente. Se agrega display del men√∫ principal. Agregar archivo de implementaci√≥n de funciones.   |
| 06/11/24  | Jonathan Monge Cascante    | Creaci√≥n de prototipos de funciones para manejo de prestamos de diversos tipos.   |
| 06/11/24  | Jonathan Monge Cascante    | Creaci√≥n de funci√≥n inicializadora de las tablas en caso de que no existan en la base de datos.  |
| 07/11/24  | Jonathan Monge Cascante    | Creaci√≥n de prototipo de funci√≥n para insercion de datos en tablas, en la seccion de creacion de cuenta.  |
| 07/11/24  | Sergio Castillo V√≠quez   | Creaci√≥n de funciones para la creaci√≥n de cuentas, funci√≥n de hasheo para las contrase√±as de las cuentas (OpenSSL), funci√≥n para abrir la base de datos, funci√≥n para la consulta de las tablas en la DB, funci√≥n para la verificaci√≥n de una cuenta y funci√≥n de eliminaci√≥n de cuentas |
| 07/11/24  | Sergio Castillo V√≠quez   | Implementaci√≥n de las funciones al main en las opciones de crear una cuenta e ingresar al sistema |
| 08/11/24  | Sergio Castillo V√≠quez   | Actualizaciones en m√∫ltiples funciones para aumentar su documentaci√≥n y cambios menores |
| 08/11/24  | Rodrigo S√°nchez Araya   | Se agrega un men√∫ para las funciones de atenci√≥n al cliente (Se agrega al main) . Se agrega implementaci√≥n de las funciones de Dep√≥sito, Retiro, Transferencia, Salida del pa√≠s, Consulta Pin, Consulta CVV.  |
| 08/11/24  | Jonathan Monge Cascante    | Eliminaci√≥n de archivos y funciones duplicadas o descartadas e inicio del desarrollo de un makefile para compilaci√≥n. |
| 08/11/24  | Jonathan Monge Cascante    | Implementaci√≥n de submen√∫ de prestamos personales en colones o d√≥lares y desarrollo de funci√≥n para inserci√≥n de datos de prestamos en tablas.  |
| 26/11/24  | Rodrigo S√°nchez Araya    | Ajuste en la estructura de las bases de datos de movimientos (se crea una para movimientos de cuentas en colones y otra para d√≥lares) ajuste en la estructura de las tablas de pr√©stamos (se agrega cant de cuotas por pagar y pagadas), se hace la implementaci√≥n de las funciones de realizar un abono a un cr√©dito, realizar el pago de una cuota, se agrega la funcion de settear un movimiento y se establece la manera de imprimir los reportes de movimientos. |
| 27/11/24  | Sergio Castillo V√≠quez    | Creaci√≥n de UU.cpp archivo que une en uno solo los siguientes codigos AbrirDB.cpp y .hpp, ConsultasDB.cpp y .hpp, TipoCambio.cpp y .hpp y Hash.cpp y .hpp   |
| 27/11/24  | Rodrigo Sanchez Araya   | Se agrega funcionalidad para agregar movimientos la tabla dedicada, se agrega manejo de errores al men√∫ main y al men√∫ de atenci√≥n al cliente.  |


### Referencias 

1. Billin. (2018). Simulador de pr√©stamos personales y empresas - Calculadora Billin. https://www.billin.net/simulador-prestamos-personales-calculadora/

2. GCFGlobal. Cr√©dito: ¬øCu√°les son los tipos de inter√©s? Recuperado el 22 de Octubre, 2024, de https://edu.gcfglobal.org/es/credito/cuales-son-las-tasas-de-interes/1/